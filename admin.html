<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Swarup QnA Admin</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background: linear-gradient(to right, #e0f7fa, #b2ebf2);
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #0077b6;
    }

    .form-container {
      background: #ffffffcc;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .form-container input,
    .form-container select,
    .form-container textarea,
    .form-container button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #bbb;
      font-size: 16px;
    }

    .form-container button {
      background-color: #00bcd4;
      color: white;
      border: none;
      cursor: pointer;
    }

    .form-container button:hover {
      background-color: #008ba3;
    }

    .qna-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .qna-card {
      background: #ffffff;
      border-left: 6px solid #00acc1;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }

    .qna-card .top {
      font-size: 14px;
      color: #555;
      margin-bottom: 5px;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .qna-card .question {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .qna-card .answer {
      color: #333;
      margin-bottom: 10px;
    }

    .qna-card .actions {
      text-align: right;
    }

    .qna-card .actions button {
      margin-left: 10px;
      padding: 5px 10px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .edit-btn {
      background-color: #ffca28;
      color: #000;
    }

    .delete-btn {
      background-color: #e53935;
      color: white;
    }

    @media screen and (max-width: 600px) {
      .qna-card .top {
        flex-direction: column;
        gap: 4px;
      }

      .qna-card .actions {
        text-align: left;
      }
    }
  </style>
</head>
<body>

  <h1>Swarup QnA Admin</h1>

  <div class="form-container">
    <input type="text" id="class" placeholder="Class" />
    <input type="text" id="subject" placeholder="Subject" />
    <input type="text" id="chapter" placeholder="Chapter" />
    <input type="number" id="marks" placeholder="Marks" />
    <textarea id="question" placeholder="Enter question"></textarea>
    <textarea id="answer" placeholder="Enter answer"></textarea>
    <button onclick="addQnA()">Add QnA</button>
  </div>

  <div class="qna-list" id="qnaList">
    <!-- QnA items will appear here -->
  </div>

  <script type="module">
    // Firebase config
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getDatabase,
      ref,
      push,
      onValue,
      remove,
      update
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_DOMAIN",
      databaseURL: "YOUR_DB_URL",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_BUCKET",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const qnaRef = ref(db, "qna");

    const qnaList = document.getElementById("qnaList");

    onValue(qnaRef, (snapshot) => {
      qnaList.innerHTML = "";
      const data = snapshot.val();
      const keys = Object.keys(data || {}).reverse();
      keys.forEach((key) => {
        const q = data[key];
        const card = document.createElement("div");
        card.className = "qna-card";
        card.innerHTML = `
          <div class="top">
            <div>${q.class} • ${q.subject} • ${q.chapter}</div>
            <div>${q.marks} Marks</div>
          </div>
          <div class="question">Q: ${q.question}</div>
          <div class="answer">A: ${q.answer}</div>
          <div class="actions">
            <button class="edit-btn" onclick="editQnA('${key}')">Edit</button>
            <button class="delete-btn" onclick="deleteQnA('${key}')">Delete</button>
          </div>
        `;
        qnaList.appendChild(card);
      });
    });

    window.addQnA = function () {
      const classVal = document.getElementById("class").value.trim();
      const subject = document.getElementById("subject").value.trim();
      const chapter = document.getElementById("chapter").value.trim();
      const marks = document.getElementById("marks").value.trim();
      const question = document.getElementById("question").value.trim();
      const answer = document.getElementById("answer").value.trim();

      if (classVal && subject && chapter && marks && question && answer) {
        push(qnaRef, {
          class: classVal,
          subject,
          chapter,
          marks,
          question,
          answer
        });

        document.getElementById("class").value = "";
        document.getElementById("subject").value = "";
        document.getElementById("chapter").value = "";
        document.getElementById("marks").value = "";
        document.getElementById("question").value = "";
        document.getElementById("answer").value = "";
      } else {
        alert("Please fill in all fields.");
      }
    };

    window.deleteQnA = function (key) {
      const confirmDel = confirm("Delete this QnA?");
      if (confirmDel) {
        remove(ref(db, "qna/" + key));
      }
    };

    window.editQnA = function (key) {
      const qna = prompt("Update question:");
      const ans = prompt("Update answer:");
      if (qna !== null && ans !== null) {
        update(ref(db, "qna/" + key), {
          question: qna,
          answer: ans
        });
      }
    };
  </script>

</body>
</html>
